\section{Results}
\label{sec:results}

We did not run any of the competitorâ€™s algorithms. We lifted the reported numbers from the ann-benhmarks site and their interactive plots. We made sure to use the same aws instance as they did so its a fair comparison


Tables \ref{table:results:ann-10} and \ref{table:results:ann-100} show the results of our benchmarking against FAISS, bruteforce-blas, and HNSW. Our throughput values for these algorithms comes from the ANN benchmarks website's interactive plots, from which we can assess the throughput of each algorithm at a given recall value. We 


We report the highest throughput value for each algorithm at a recall value of 1.0. We report the recall value for each algorithm at the highest throughput value. We report the mean and median speedup factor of CAKES over each algorithm.

For $k= 10$, we report a mean $989\times$ (median $248\times$) speedup over faiss-ivf, a mean $1456\times$ (median $582\times$) speedup over bruteforce-blas, 
and a mean $63\times$ (median $49\times$) speedup over HNSW. For $k=100$, we report a mean $109\times$ (median $71\times$) speedup over faiss-ivf, a mean $382\times$ (median $267\times$) speedup over bruteforce-blas, and a mean $10\times$ (median $9\times$) speedup over HNSW.


For all datasets benchmarked in this manuscript, the auto-tuning method selected repeated $\rho$-nearest neighbor (Section~\ref{subsubsec:methods:knn-search:repeated-rnn}).

We notice that the mean and median speedup factors differ significantly for all methods, which suggests that the speedup factor is heavily dataset-dependent on the dataset; in particular, across all algorithms, and both values of $k$, CAKES exhibits particularly high speedup factors with SIFT and GIST, under Euclidean distance. As GIST was designed to be a difficult dataset for classifiers~\cite{Lee2019PracticalLP} , CAKES's strong performance with this dataset is particularly encouraging. Further investigation of CAKES's performance on other challenging or adversarial datasets is warranted. 

\begin{table*}[!t]
    % \renewcommand{\arraystretch}{1.15}
    \caption{Runtime performance (queries per second) of CAKES vs. other methods, $k=10$}
    \label{table:results:ann-10}
    \vskip 0.15in
    \begin{center}
    \begin{small}
    \begin{sc}
    \begin{tabular}{|l|p{1cm}|p{1cm}|p{1cm}|p{1cm}|p{1cm}|p{1cm}|p{1cm}|p{1cm}|}
    \textbf{Dataset}  & \multicolumn{2}{|c|}{\textbf{faiss-ivf}} & \multicolumn{2}{|c|}{\textbf{bruteforce-blas}} & \multicolumn{2}{|c|}{\textbf{hnsw(faiss)}} & \multicolumn{2}{|c|}{\textbf{CAKES}} \\
    \cline{2-9}
    &                    Recall & QPS                           & Recall & QPS                           & Recall & QPS                                           & Recall & QPS \\
    \hline
    fashion-mnist      & 1.000 & 188.03                           & 1.000 & 52.91                                  & 1.000* & 339.74                                                    & 1.000 & 16,220 \\
    \hline
    gist                   & 1.000 & 3.55                           & 1.000 & 2.63                                     & 0.953 & 149.58                                                   & 1.000 & 10,600 \\
    \hline
    glove-25              & 1.000 & 78.78                          & 1.000 & 33.52                              & 1.000 & 552.67                                                  & 0.798 & 19,520 \\
    \hline
    glove-100             & 1.000 & 21.16                          & 1.000 & 16.52                                & 0.998 & 155.90                                                  & 0.904 & 6,935 \\
    \hline
    sift                  & 1.000 &  24.52                          & 1.000 & 16.40                               & 1.000 & 275.07                                                    & 1.000 & 31,800 \\
    \hline
    \end{tabular}
    \end{sc}
    \end{small}
    \end{center}
    \vskip -0.1in
    \end{table*}


\begin{table*}[!t]
    % \renewcommand{\arraystretch}{1.15}
    \caption{Runtime performance (queries per second) of CAKES vs. other methods, $k=100$. Other methods did not report results for glove-25. Asterisk on recall value indicates that the algorithm had imperfect recall greater than or equal to 0.9995}
    \label{table:results:ann-100}
    \vskip 0.15in
    \begin{center}
    \begin{small}
    \begin{sc}
    \begin{tabular}{|l|p{1cm}|p{1cm}|p{1cm}|p{1cm}|p{1cm}|p{1cm}|p{1cm}|p{1cm}|}
    \textbf{Dataset}  & \multicolumn{2}{|c|}{\textbf{faiss-ivf}} & \multicolumn{2}{|c|}{\textbf{bruteforce-blas}} & \multicolumn{2}{|c|}{\textbf{hnsw(faiss)}} & \multicolumn{2}{|c|}{\textbf{CAKES}} \\
    &                    Recall & QPS                           & Recall & QPS                           & Recall & QPS                                           & Recall & QPS \\
    \hline
    fashion-mnist         & 1.000 & 111.47                           & 1.000* & 16.02                                  & 1.000* & 277.80                                                    & 1.000 & 1,549 \\ 
    \hline
    gist                   & 1.000 & 2.70                           & 1.000* & 0.80                                 & 0.995 & 59.71                                                    & 1.000 & 753.9 \\
    \hline
    glove-25              & -- & --                                & -- & --                                & -- & --                                                    & 0.851 & 1,471 \\
    \hline
    glove-100             & 1.000* &  19.04                          & 1.000* & 7.52                                 & 0.987 & 92.58                                                    & 0.905 & 396.0 \\
    \hline
    sift                  & 1.000 &  23.50                          & 1.000 & 6.51                                  & 1.000* & 179.14                                                    & 1.000 & 2,852 \\                                                 
    \hline
    \end{tabular}
    \end{sc}
    \end{small}
    \end{center}
    \vskip -0.1in
    \end{table*}


\begin{table*}[!t]
    % \renewcommand{\arraystretch}{1.15}
    \caption{Runtime performance (queries per second) of CAKES and Speedup Factor over Naive Linear Search, $k=10$}
    \label{table:results:ann-alt-10}
    \vskip 0.15in
    \begin{center}
    \begin{small}
    \begin{sc}
    \begin{tabular}{|l|l|l|l|l|}
    \textbf{Dataset} & \textbf{CAKES Throughput} & \textbf{Speedup Factor over Linear} \\
    \hline
    deep-image            & 232.1 & 37.2      \\
    \hline
    mnist                   & 129,300 & 101.9      \\
    \hline
    glove-50              & 10,950 & 12.28      \\
    \hline 
    glove-200              & 2,290 & 8.55     \\
    \hline
    lastfm               & 13,950 & 4.55           \\
    \hline
    \end{tabular}
    \end{sc}
    \end{small}
    \end{center}
    \vskip -0.1in
    \end{table*}


\begin{table*}[!t]
    % \renewcommand{\arraystretch}{1.15}
    \caption{Runtime performance (queries per second) of CAKES and Speedup Factor over Naive Linear Search, $k=100$}
    \label{table:results:ann-alt-100}
    \vskip 0.15in
    \begin{center}
    \begin{small}
    \begin{sc}
    \begin{tabular}{|l|l|l|l|l|l|}
    \textbf{Dataset} & \textbf{CAKES Throughput} & \textbf{Speedup Factor over Linear} \\
    \hline
    deep-image             &157.3 &25.74             \\
    \hline
    mnist                 &71,090 &56.63      \\
    \hline
    glove-50               & 8,867 & 9.84      \\
    \hline 
    glove-200              & 2,264 & 8.49    \\
    \hline
    lastfm                 & 13,950     &4.55                               \\
    \hline
    \end{tabular}
    \end{sc}
    \end{small}
    \end{center}
    \vskip -0.1in
    \end{table*}
    