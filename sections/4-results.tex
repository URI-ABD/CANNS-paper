\section{Results}
\label{sec:results}

\begin{figure}[ht!]
    \centering
    \includegraphics[width=3.4in]{images/result_plots/deep-image_1.png}
    \caption{Performance of CAKES algorithms on deep-image dataset.}
    \label{fig:methods:deep-image}
\end{figure}

Figure [ADD FIGURE NUMBER] is a violin plot which shows the performance of our algorithms
on [ADD DATASET] under [ADD DISTANCE FUNCTION] distance, using [ADD NUMBER OF SHARDS] shards.
As indicated in the title, the dataset has cardinality [ADD cardinality] and dimensionality [ADD DIMENSIONALITY].
On the horizontal axis, we have each of the $k$-NN algorithms described in Section 2.4, as well as  
an additional "algorithm" which we call "Oracle $\rho$-NN" [REPLACE WITH ACTUAL NAME].  With "Oracle $\rho$-NN", we perform $\rho$-NN search using the 
distance to the $k$-th nearest neighbor as the radius. Of course, as it is impossible to
to know the distance to the $k$-th nearest neighbor \emph{a priori}, this algorithm 
is useful only for benchmarking purposes.

The vertical axis for Figure [ADD FIGURE NUMBER] is the time query in seconds on a logarithmic scale. 
As shown in the key, different colors represent different values of $k$. 
The plot shows the distribution of query times for each algorithm for each value of $k$. 
Because of the logarithmic scale of the vertical axis, it is unsurprising that we 
see longer lower tails than upper tails for many of these algorithms. 

Specs of Ark, and maybe M1 MacBook Air and Dell XPS.

Ark: a 28-core Intel Xeon E5-2690 v4 2.60GHz, 512GB RAM, Manjaro Linux with kernel 5.15.78-1-MANJARO \#1 SMP PREEMPT. Rust 1.70, Python 3.10.5

Macbook Air: 8-core (4 performance, 4 efficiency) Apple M1 processor with 16GB RAM, macOS 12.1. Rust 1.70, Python 3.9.4

Amazon AWS: 64-core Intel Xeon Platinum 8375C CPU 2.90GHz, 512GB RAM, Ubuntu 22.04.3-Ubuntu SMP. Rust 1.71.1, Python 3.10.12

https://github.com/URI-ABD/clam

For each pair $(X, f)$ and a small selection of depths, measure:
\begin{enumerate}[1.]
    \item linear search vs accelerated search:
    \begin{enumerate}[i.]
        \item runtime performance,
        \item speedup factor, and
        \item number of distance comparisons.
    \end{enumerate}
\end{enumerate}

\begin{table*}[!t]
    % \renewcommand{\arraystretch}{1.15}
    \caption{Runtime performance (queries per second) of CAKES vs. other methods, $k=10$}
    \label{table:results:ann-10}
    \vskip 0.15in
    \begin{center}
    \begin{small}
    \begin{sc}
    \begin{tabular}{|l|c|c|c|c|c|c|c|c|}
    \textbf{Dataset}  & \multicolumn{2}{|c|}\textbf{faiss-ivf} & \multicolumn{2}{|c|}\textbf{bruteforce-blas} & \multicolumn{2}{|c|}\textbf{hnsw(faiss)} & \multicolumn{2}{|c|}\textbf{CAKES} \\
    \cline{2-9}
    &                    Recall & QPS                           & Recall & QPS                           & Recall & QPS                                           & Recall & QPS \\
    \hline
    fashion-mnist      & 0.54 & 324.79                           & 1.00 & 52.91                                  & 0.94 & 60.89                                                    & 1.00 & 16,220 \\
    \hline
    gist                   & 1.00 & 3.55                           & 1.00 & 2.63                                     & 0.95 & 149.58                                                   & 1.00 & 10,600e \\
    \hline
    glove-25              & 1.00 & 78.78                          & 1.00 & 33.52                              & 1.00 & 552.67                                                  & -- & 19,520 \\
    \hline
    glove-100             & 1.00 & 21.16                          & 1.00 & 16.52                                & 0.99 & 155.90                                                  & -- & 6,935 \\
    \hline
    sift                  & 1.00 &  24.52                          & 1.00 & 16.40                               & 1.00 & 275.07                                                    & 1.00 & 31,800 \\
    \hline
    \end{tabular}
    \end{sc}
    \end{small}
    \end{center}
    \vskip -0.1in
    \end{table*}


\begin{table*}[!t]
    % \renewcommand{\arraystretch}{1.15}
    \caption{Runtime performance (queries per second) of CAKES vs. other methods, $k=100$}
    \label{table:results:ann-100}
    \vskip 0.15in
    \begin{center}
    \begin{small}
    \begin{sc}
    \begin{tabular}{|l|c|c|c|c|c|c|c|c|}
    \textbf{Dataset}  & \multicolumn{2}{|c|}\textbf{faiss-ivf} & \multicolumn{2}{|c|}\textbf{bruteforce-blas} & \multicolumn{2}{|c|}\textbf{hnsw(faiss)} & \multicolumn{2}{|c|}\textbf{CAKES} \\
    &                    Recall & QPS                           & Recall & QPS                           & Recall & QPS                                           & Recall & QPS \\
    \hline
    fashion-mnist         & 1.00 & 111.47                           & 0.99 & 16.02                                  & 0.99 & 277.80                                                    & 1.00 & 1,549 \\ 
    \hline
    gist                   & 1.00 & 2.70                           & 0.99 & 0.80                                 & 0.99 & 59.71                                                    & 1.00 & 753.9 \\
    \hline
    glove-25              & -- & --                                & -- & --                                & -- & --                                                    & -- & 1,471 \\
    \hline
    glove-100             & 0.99 &  7.52                          & 0.99 & 3.11                                  & 0.99 & 92.58                                                    & -- & 396.0 \\
    \hline
    sift                  & 1.00 &  23.50                          & 1.00 & 6.51                                  & 0.99 & 179.14                                                    & 1.00 & 2,852 \\                                                 
    \hline
    \end{tabular}
    \end{sc}
    \end{small}
    \end{center}
    \vskip -0.1in
    \end{table*}


    % \hline
    % deep-image             & 0.00 & 0.00                           & 0.00 & 0.00                                 & 0.00 & 0.00                                                     & 1.00 & 42 \\
    % \hline
    % mnist                   & 0.00 & 0.00                          & 0.00 & 0.00                                 & 0.00 & 0.00                                                    & 1.00 & 42 \\
    % \hline
    % glove-50               & 0.00 & 0.00                           & 0.00 & 0.00                              & 0.00 & 0.00                                                    & 1.00 & 42 \\
    % \hline
    % lastfm                 & 0.00 & 0.00                           & 0.00 & 0.00                               & 0.00 & 0.00   